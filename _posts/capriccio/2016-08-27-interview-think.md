---
layout:post
comments:false
categories:随想
title: "一个面试官的思考"
grammar_cjkRuby: true
---

## 一个面试官的思考

最近公司另一个部门在招人，大概是因为项目太赶，那个部门抽不出人手面试，所以就找我帮忙面试了。面试下来也有6-7个人了，觉得有必要说一下自己的感受，所以就发篇博客记录一下吧。

### 我关注的技术

可能是受我们老大的影响，我并不是非常关注技术的细节，更多关注的是对方的编程思想和抽象能力，因为都是用java的，面向对象的编程，抽象能力不强的人写出来的代码质量都不会太高，而且很难维护，另外也比较关注每个人对他自己使用过的技术的理解，以及对这种技术的代码架构的理解，当然对于我们公司需要的技术我也会稍稍问一下对方是否用过和熟悉的程度。

我们公司主要使用的技术：

* java
* maven
* mysql
* sso
* oauth2
* spring+spring mvc
* tomcat
* linux

### 面试的问题

其实到目前为止，我毕业也只有三年，不过面试的人中，其实不乏工作时间比我更长的人，说实话我刚开始面试这些人还是有慌的，但是面试过几个之后我开始觉得可能也并没有我想象的那么厉害，可能技术这行真的不是只看工作年限吧。

这里提下我问过的一些问题和感悟吧。

#### spring的两个核心概念和实现原理？

用过spring的人都知道，就是IOC和AOP，实现原理就是通过反射和动态代理，可能多数人觉得这个问题太简单了，不过说实话，我真的遇到了工作7年说不上来这两个技术的实现原理的，对于spring的使用就真的只是使用而已了，对与这类人，我的打分会下降非常多，连这么简单的概念都不清楚，真的觉得代码出错之后可能连百度用什么关键词都打不出来。

#### spring mvn的参数绑定实现？

现在用过spring mvc的人非常多，但是真正去理解spring的参数绑定实现原理的人可能就少很多了，我问这个问题的时候，大多数人回答都是只要在xml配置控制器映射路径，然后参数名和方法参数名一致就能绑定了，其实这个回答是典型的答非所问。

因为这个不仅涉及spring的具体实现，还设计java的反射机制和反射的一个弱点。

spring mvc实际上是通过一个参数解析器列表来实现参数解析和绑定的，spring mvc参数绑定扩展也是通过扩展参数解析器来实现的，这个是spring的实现，但是再深入一点，spring如何知道这个方法有哪些参数呢？这个就是通过反射机制得到的，能答到这一步的话，基本对spring mvc的参数绑定机制理解完全没有问题的，但是在深入一步，spring是如何知道方法的形参声明名称的？很遗憾，目前为止并没有人可以让我问到这个问题，因为我面试的人里基本连spring的参数绑定实现都答不上来。

实际上，在java的反射机制里，是无法得到方法的形参名称的，spring是通过解析字节码，也就是class文件，并从里边分析出形参名称的。

#### hibernate和mybatis的比较

hibernate和mybatis大概是目前使用最广泛的开源ORM框架了，这两个框架的对比是我最喜欢问的问题。

hibernate优点

* 支持HQL
* 完全屏蔽底层数据库实现

hibernate缺点

* 比较笨重
* 效率相对较低
* 概念繁琐，使用复杂

mybatis优点

* 简单轻量
* 效率较hibernate高一点

mybatis缺点

* 底层数据库关联太强

我只列举几点明显的区别，实际上我也只要求能答出一到两点区别就行了，不过面试过的人能答出来的也在少数，主要是多数都只用过其中一种技术，另一种技术用的少，就没办法多问。

#### tomcat性能优化怎么做？

tomcat是目前开发用得比较多的web容器了，对应的还有jetty，不过我们公司用jetty的相对少数，而且我自己对jetty的了解也不多，所以基本不问jetty的相关问题，但是面试过的人基本也都是用tomcat作为开发和部署的web容器，应该多少会做过tomcat的优化工作，但是实际上我问的这个问题，真正能答出来的，到目前为止好像只有一个。

实际上tomcat的优化非常简单，只要调整一下启动参数增加堆内存，另外调整一下以下几项：

* 最大线程数
* 最大等待线程
* 最小等待线程
* 关闭远程DNS域名校验

就可以了，具体的参数值要通过测试得出的，并没有最优方案。

只要能答出优化思路就好了，并不需要准确说明调整哪些参数，其实我有点怀疑，是我自己的问法有问题吗？为什么经常用tomcat的人连这个都答不上来呢？

当然，如果有人能答上来，我可能会进一步提问，如何远程调试tomcat并通过测试得出上面的参数值的最优解？

#### mysql的性能优化怎么做？

关于mysql的性能优化，其实和tomcat差不多，主要调整的是查询缓存，最大连接数等参数，当然，mysql的参数调整项非常多，专业的DBA都不一定能答完整，我自己也记不住那么多参数，我需要的是对方能答出一个思路，知道从哪里入手可以优化就行了，具体怎么优化其实谷歌一下很好找的，不过大多数人都是直接回答我：并没有做过这方面的优化，所以不知道，这个就让我很失望了。

#### maven的生命周期

maven的生命周期，这个大概是我问过的最难最偏的一个问题了，实际上maven有三套相互独立的生命周期：

* Clean Lifecycle 在进行真正的构建之前进行一些清理工作。
* Default Lifecycle 构建的核心部分，编译，测试，打包，部署等等。
* Site Lifecycle 生成项目报告，站点，发布站点。

需要强调的一点是这个三个生命周期是相互独立的，中间没有任何交叉，每个生命周期有不同的阶段（phase）

1. clean生命周期：清理项目，包含三个phase。

	- pre-clean：执行清理前需要完成的工作
	- clean：清理上一次构建生成的文件
	- post-clean：执行清理后需要完成的工作

2. default生命周期：构建项目，重要的phase如下。

	- validate：验证工程是否正确，所有需要的资源是否可用。
	- compile：编译项目的源代码。  
	- test：使用合适的单元测试框架来测试已编译的源代码。这些测试不需要已打包和布署。
	- Package：把已编译的代码打包成可发布的格式，比如jar。
	- integration-test：如有需要，将包处理和发布到一个能够进行集成测试的环境。
	- verify：运行所有检查，验证包是否有效且达到质量标准。
	- install：把包安装到maven本地仓库，可以被其他工程作为依赖来使用。
	- Deploy：在集成或者发布环境下执行，将最终版本的包拷贝到远程的repository，使得其他的开发者或者工程可以共享。

3. site生命周期：建立和发布项目站点，phase如下

	- pre-site：生成项目站点之前需要完成的工作
	- site：生成项目站点文档
 	- post-site：生成项目站点之后需要完成的工作
	- site-deploy：将项目站点发布到服务器

实际上这部分也并没有希望对方能完整答出来，只要能知道三个独立的生命周期，分别在什么时间生效就可以了。

问这个问题实际上是因为多数使用maven的人都以为maven只有一个管理jar包依赖的功能，实际上maven还有很多功能，都是通过插件来实现的，而公司在搭建开发环境的时候，很容易由于maven的一些错误导致环境搭建不起来，如果不对maven有更深入的理解，这类问题根本无法解决，我在公司就帮无数个同事解决过无数个maven问题了，说实话真的是很麻烦。

#### jdk的集合框架

跟jdk有关的问题，多半都是集合框架的问题了，关于这方面我问的比较少，主要集中在下面几个问题：

* List的两个实现ArrayList和LinkedList的实现区别和使用场景
* Map的两个实现HashMap和HashTable的区别
* HashTable和ConcurrentHashMap都是同步安全的，他们的区别是什么？

这个几个问题其实都很好回答，令我吃惊的是能答出来的人居然也在少数，甚至连一个工作7年之久的java程序员都答不出来，真的让我很奇怪，这些问题太难了吗？还是我面试的这些人都不关注基础？

首先说下ArrayList和LinkedList，ArrayList是基于数组实现的，LinkedList是基于双向链表实现的，所以实际上ArrayList读取的性能比LinkedList要好，LinkedList增加和删除元素的性能更好，这里也说明了这两个实现类的使用场景，但是面试的人居然大部分都是说只用ArrayList，几乎不用LinkedList。

HashMap和HashTable有三点主要区别：

* HashMap是线程不安全的，HashTable是线程安全的。
* HashMap允许null值作为key，HashTable不允许。
* HashMap去掉了HashTable 的contains方法，但是加上了containsValue（）和containsKey（）方法

HashTable和ConcurrentHashMap的区别：

* HashTable是完全同步的线程安全，高并发下性能非常差；
* ConcurrentHashMap是通过分段锁实现的线程安全，高并发下读写性能都很好；
* 在需要保证线程安全的情况下，优先选择ConcurrentHashMap。

以上就是我面试过程中会问的一些问题，实际上感觉都是一些比较简单和基础的问题，我主要的目的是想了解对方对技术的概念的理解，很多细节都忽略的，也不需要对方能答出来，不过发现真的不少人都答不上来，不知道是不是我面试的问题有问题，可能我的问题还没办法考验出面试者的真正能力？或许以后我会称为一个更好更合格的面试官吧，还需要努力。